---
import SectionHeader from "./SectionHeader.astro";

type MediaImage = {
  src: string;
  alt: string;
  ratio?: "16/9" | "4/3" | "3/2" | "1/1" | "21/9";
  position?: string;
};

const {
  eyebrow,
  title,
  subtitle,
  body = [],
  bullets = [],
  image,
  reverse = false,
} = Astro.props as {
  eyebrow?: string;
  title: string;
  subtitle?: string;
  body?: string[];
  bullets?: string[];
  image: MediaImage;
  reverse?: boolean;
};
---

<section class="section-y" data-reveal-group="split-section">
  <div class={`site-container grid gap-8 lg:items-center ${reverse ? "lg:grid-cols-[1.05fr_0.95fr]" : "lg:grid-cols-[0.95fr_1.05fr]"}`}>
    <div class={`space-y-4 ${reverse ? "lg:order-2" : ""}`} data-reveal="auto">
      <SectionHeader eyebrow={eyebrow} title={title} subtitle={subtitle} />
      {body.map((paragraph) => <p class="text-sm leading-7 text-slate-600">{paragraph}</p>)}
      {bullets.length > 0 && (
        <ul class="grid gap-2 text-sm text-slate-600" data-stagger="split-bullets">
          {bullets.map((item) => (
            <li class="rounded-[var(--radius-md)] border border-[color:var(--border)] bg-white px-3 py-2" data-stagger-item>â€¢ {item}</li>
          ))}
        </ul>
      )}
    </div>

    <figure class={`card-base overflow-hidden split-figure ${reverse ? "lg:order-1" : ""}`} data-reveal={reverse ? "right" : "left"}>
      <img
        src={image.src}
        alt={image.alt}
        class="section-media split-figure-media motion-zoom"
        style={`aspect-ratio:${image.ratio ?? "4/3"};object-position:${image.position ?? "center"};`}
        loading="lazy"
        decoding="async"
      />
    </figure>
  </div>
</section>
