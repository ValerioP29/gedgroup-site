---
import Layout from "../../layouts/Layout.astro";
import SectionHeader from "../../components/SectionHeader.astro";
import FaqAccordion from "../../components/FaqAccordion.astro";
import { services } from "../../data/services";
import { getWhatsAppUrl } from "../../data/site";

export async function getStaticPaths() {
  return services.map((service) => ({
    params: { slug: service.slug },
    props: { service },
  }));
}

const { service } = Astro.props;
---

<Layout title={`${service.title} | GED Group`} description={service.short}>
  <section class="border-b border-black/5 bg-white">
    <div class="mx-auto max-w-7xl px-4 py-12">
      <div class="mb-3 inline-flex items-center rounded-full border border-neutral-200 bg-neutral-50 px-3 py-1 text-xs text-neutral-600">
        {service.heroLabel}
      </div>
      <h1 class="text-4xl font-semibold tracking-tight">{service.title}</h1>
      <p class="mt-3 max-w-3xl text-lg text-neutral-600">{service.summary}</p>

      <div class="mt-6 flex flex-wrap gap-3">
        <a href="/contatti" class="rounded-xl bg-neutral-900 px-4 py-3 text-sm font-semibold text-white hover:bg-black">
          Richiedi preventivo
        </a>
        <a
          href={getWhatsAppUrl(`Ciao GED Group, vorrei informazioni per il servizio: ${service.title}.`)}
          target="_blank"
          rel="noopener"
          class="rounded-xl border border-neutral-300 bg-white px-4 py-3 text-sm font-semibold hover:bg-neutral-50"
          data-track="click_whatsapp"
        >
          Scrivi su WhatsApp
        </a>
      </div>
    </div>
  </section>

  <section class="mx-auto grid max-w-7xl gap-6 px-4 py-12 lg:grid-cols-[1.15fr_0.85fr]">
    <div class="space-y-6">
      <div class="panel p-5">
        <SectionHeader
          eyebrow="Descrizione"
          title="Cosa include il servizio"
          subtitle={service.short}
        />
        <div class="mt-5 space-y-4 text-sm leading-6 text-neutral-600">
          {service.description.map((p) => <p>{p}</p>)}
        </div>
      </div>

      <div class="panel p-5">
        <h2 class="text-xl font-semibold">Attività tipiche</h2>
        <ul class="mt-4 grid gap-2 text-sm text-neutral-600 sm:grid-cols-2">
          {service.bullets.map((b) => (
            <li class="rounded-xl border border-black/5 bg-neutral-50 px-3 py-2">• {b}</li>
          ))}
        </ul>
      </div>

      <div class="panel p-5">
        <h2 class="text-xl font-semibold">Domande frequenti</h2>
        <div class="mt-4">
          <FaqAccordion items={service.faqs} />
        </div>
      </div>
    </div>

    <aside class="space-y-6">
      <div class="panel p-5">
        <h3 class="text-lg font-semibold">Settori serviti</h3>
        <ul class="mt-3 space-y-2 text-sm text-neutral-600">
          {service.sectors.map((s) => <li>• {s}</li>)}
        </ul>
      </div>

      <div class="panel p-5">
        <h3 class="text-lg font-semibold">Processo operativo</h3>
        <ol class="mt-3 space-y-2 text-sm text-neutral-600">
          {service.process.map((step, i) => (
            <li class="rounded-xl border border-black/5 bg-neutral-50 px-3 py-2">
              <strong>{i + 1}.</strong> {step}
            </li>
          ))}
        </ol>
      </div>

      <div class="panel p-5">
        <h3 class="text-lg font-semibold">Ti serve una proposta rapida?</h3>
        <p class="mt-2 text-sm text-neutral-600">
          Possiamo impostare questa CTA con form corto o WhatsApp precompilato in base al servizio.
        </p>
        <div class="mt-4 space-y-2">
          <a href="/contatti" class="block rounded-xl bg-neutral-900 px-4 py-2.5 text-center text-sm font-semibold text-white hover:bg-black">
            Vai ai contatti
          </a>
          <a
            href={getWhatsAppUrl(`Ciao GED Group, vorrei un preventivo per: ${service.title}.`)}
            target="_blank"
            rel="noopener"
            class="block rounded-xl border border-neutral-300 px-4 py-2.5 text-center text-sm font-semibold hover:bg-neutral-50"
            data-track="click_whatsapp"
          >
            WhatsApp
          </a>
        </div>
      </div>
    </aside>
  </section>
</Layout>