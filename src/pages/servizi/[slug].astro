---
import Layout from "../../layouts/Layout.astro";
import PageHero from "../../components/PageHero.astro";
import SplitSection from "../../components/SplitSection.astro";
import ImageBand from "../../components/ImageBand.astro";
import FaqAccordion from "../../components/FaqAccordion.astro";
import FinalCTA from "../../components/FinalCTA.astro";
import ServiceProofBlock from "../../components/ServiceProofBlock.astro";
import { services } from "../../data/services";
import { getWhatsAppUrl } from "../../data/site";

export async function getStaticPaths() {
  return services.map((service) => ({
    params: { slug: service.slug },
    props: { service },
  }));
}

const { service } = Astro.props;
---

<Layout title={`${service.title} | GED Group`} description={service.short}>
  <PageHero
    eyebrow={service.heroLabel}
    title={service.title}
    subtitle={service.summary}
    breadcrumbs={[{ label: "Home", href: "/" }, { label: "Servizi", href: "/servizi" }, { label: service.title }]}
    image={service.heroImage}
  >
    <a slot="actions" href="/contatti" class="btn btn-primary">Richiedi preventivo</a>
    <a
      slot="actions"
      href={getWhatsAppUrl(`Ciao GED Group, vorrei informazioni per il servizio: ${service.title}.`)}
      target="_blank"
      rel="noopener"
      class="btn btn-secondary"
      data-track="click_whatsapp"
    >
      Consulenza su WhatsApp
    </a>
  </PageHero>

  <SplitSection
    eyebrow="Dettaglio servizio"
    title="Cosa include"
    subtitle={service.short}
    body={service.description}
    bullets={service.bullets}
    image={service.detailImages[0]}
  />

  <ServiceProofBlock
    title="Proof operativa del servizio"
    responseTime={service.responseTime}
    coverage={service.coverage}
    outputs={service.serviceOutputs}
    proofBullets={service.proofBullets}
    miniCase={service.miniCase}
  />

  <section class="section-y" data-reveal-group="service-faq">
    <div class="site-container grid gap-6 lg:grid-cols-[1fr_1fr]">
      <article class="panel" data-reveal="right">
        <h2 class="text-xl font-semibold text-slate-900">Processo sintetico</h2>
        <ol class="mt-4 grid gap-2" data-stagger="service-process">
          {service.process.map((step, i) => (
            <li class="card-base bg-slate-50 px-3 py-2 text-sm text-slate-600" data-stagger-item>
              <strong class="text-slate-900">{i + 1}.</strong> {step}
            </li>
          ))}
        </ol>
      </article>

      <article class="panel" data-reveal="left">
        <h2 class="text-xl font-semibold text-slate-900">Settori serviti</h2>
        <ul class="mt-4 grid gap-2 sm:grid-cols-2" data-stagger="sectors-grid">
          {service.sectors.map((s) => (
            <li class="rounded-[var(--radius-md)] border border-[color:var(--border)] bg-white px-3 py-2 text-sm text-slate-600" data-stagger-item>
              {s}
            </li>
          ))}
        </ul>
      </article>
    </div>
  </section>

  <ImageBand
    title="Evidenze visuali servizio"
    subtitle="Immagini di contesti reali: setup operativo, aree trattate e standard risultato atteso."
    images={service.detailImages}
  />

  <section class="section-y" data-reveal-group="service-faq">
    <div class="site-container panel" data-reveal="auto">
      <h2 class="text-xl font-semibold text-slate-900">Domande frequenti</h2>
      <div class="mt-4">
        <FaqAccordion items={service.faqs} />
      </div>
    </div>
  </section>

  <FinalCTA
    title={`Vuoi attivare ${service.title} con standard verificabili?`}
    subtitle={`Condividiamo output, tempi e piano qualitÃ  per ${service.title.toLowerCase()} prima dell'avvio operativo.`}
    primaryLabel="Richiedi approfondimento servizio"
    whatsappText={`Ciao GED Group, vorrei un confronto operativo su ${service.title}.`}
    compact={true}
  />
</Layout>
